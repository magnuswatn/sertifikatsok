<!DOCTYPE html>
<html>
	<head>
		<link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css"  media="screen,projection" integrity="sha384-gGIdbE3rejhnmhbMZyasqhmdgF/Wza7NbuLq2eAVP92BbPF/ziwfO1LtP7E/ai36" crossorigin="anonymous"/>
		<link type="text/css" rel="stylesheet" href="resources/sertifikatsok.css"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>Sertifikatsøk</title>
	</head>
	<body>
		<header>
			<div class="container">
				<div class="center">
					<div class="row">
						<a href="#">
							<div class="col s12 m4 offset-m4 offset-s0" id="logo">
								<div class="card-panel grey">
									<span class="white-text"><h5>Sertifikatsøk</h5>
										<h6 class="center-align header">Søk etter norske kvalifiserte sertifikater</h6>
									</span>
								</div>
							</div>
						</a>
					</div>
				</div>
			</div>
		</header>
		<main>
			<div class="container" id="body-container">
				<!-- Content will magically appear here -->
			</div>
		</main>
		<div class="fixed-action-btn" id="hjelp-button">
			<a class="btn-floating btn-small red tooltipped hoverable" data-position="left" data-tooltip="Litt forklaring">
				<div class="center"><b>?</b></div>
			</a>
		</div>
		<footer class="page-footer white">
			<div class="center-align">
				<a href="https://github.com/magnuswatn/sertifikatsok"><img src="resources/github.svg" height="32"></a>
			</div>
		</footer>
		<!-- Modals -->
		<div id ="modals">
			<div id="hjelp-modal" class="modal">
				<div class="modal-content">
					<div class="right"><a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat modal-close-button"><i class="material-icons">close</i></a></div>
					<div id="omnorskekvalifisertesertifikater">
					<h4>Norske kvalifiserte sertifikater</h4>
					<p>Norske kvalifiserte sertifikater er digitale ID-papirer, som kan brukes til å bekrefte identitet i den digitale verdenen. De baserer seg på samme teknologi som f.eks. SSL-sertifikater, og er spesifisert i <a href="https://www.regjeringen.no/no/dokumenter/kravspesifikasjon-for-pki-i-offentlig-se/id611085/">Kravspesifikasjon for PKI i offentlig sektor</a>.
					<br>
					<p>Det finnes i praksis to typer norske kvalifiserte sertifikater:</p>
					<h5>Person-sertifikater</h5>
					Person-sertifikater representerer en norsk statsborger i folkeregisteret. Slike sertifikater brukes typisk til:
					<ul class="browser-default">
						<li>Innlogging på tjenester som krever høy sikkerhet.</li>
						<li>Signering av f.eks. avtaler eller e-resepter</li>
						<li>Signering og kryptering av e-poster (S/MIME)</li>
					</ul>
					Person-sertifikater utstedes kun i fysisk form, da enten et smartkort ("tippekort") eller en USB-pinne.
					<br><br>
					<h5>Virksomhetssertifikater</h5>
					Virksomhetssertifikater identifiserer en virksomhet registrert i Brønnøysundregistrene. Brukes typisk til:
					<ul class="browser-default">
						<li>Autentisering av virksomheten i maskin-til-maskin-kommunikasjon (f.eks. mellom fagsystemer i helsesektoren)</li>
						<li>Signering av dokumenter på vegne av virksomheten</li>
					</ul>
					Virksomhetssertifikater er typisk "soft-sertifikater", men de finnes også i fysisk variant, da i form av smartkort.
					<br><br>
					<p>Det er i praksis to utstedere av kvalifiserte sertifikater Norge i dag, <a href="https://www.buypass.no">Buypass</a> og <a href="https://www.commfides.com/">Commfides</a>.</p>
				</div>
			</div>
			<div id="underenhet-modal" class="modal">
				<div class="modal-content">
					<div class="right">
						<a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat modal-close-button"><i class="material-icons">close</i></a>
					</div>
					<h4>Sertifikater utstedt til underenhet</h4>
					<p>Disse sertifikatene er utstedt til en underenhet av denne organisasjonen. Slike sertifikater har organisasjonsnummeret til hovedenheten i "serialNumber"-feltet og organisasjonsnummeret til underenheten i "OU"-feltet.<br><br>Eksempel:
					<div class="row">
						<div class="col s12 m5">
							<div class="card-panel teal">
								<span class="white-text">serialNumber = 995546973<br>O = WATN IT SYSTEM<br>OU = WATN UNDERENHET-113328475</span>
							</div>
						</div>
					</div>	
					Vær obs på at slike sertifikater kan bli tolket forskjellig fra system til system. Noen vil tolke det som at det tilhører underenheten, mens andre vil tolke det som tilhørende hovedenheten.</p>
				</div>
			</div>
			<div id="revokert-modal" class="modal">
				<div class="modal-content">
					<div class="right"><a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat modal-close-button"><i class="material-icons">close</i></a></div>
					<h4>Revokerte sertifikater</h4>
					<p>Revokerte sertifikater er tilbaketrukket fra sertifikatutstederen. Det kan være pga. informasjonen i sertifikatet ikke lenger er gyldig (f.eks. selskap avviklet), eller at den private nøkkelen har kommet på avveie. Slike sertifikater må ikke stoles på eller brukes.</p>
				</div>
			</div>
			<div id="ukjent-modal" class="modal">
				<div class="modal-content">
					<div class="right"><a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat modal-close-button"><i class="material-icons">close</i></a></div>
					<h4>Ukjent sertifikattype</h4>
					<p>Alle norske kvalifiserte sertifikater skal ha en en kode i seg (Policy OID) som beskriver hvilken type sertifikat det er. Disse sertifikatene hadde en ukjent kode i seg, som tyder på at det ikke er et vanlig sertifikat. Bør kun stoles på eller brukes i spesielle tilfeller.</p>
				</div>
			</div>
			<div id="ldap-modal" class="modal">
				<div class="modal-content">
					<div class="right"><a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat modal-close-button"><i class="material-icons">close</i></a></div>
					<p id="ldap-string"></p>
				</div>
			</div>
		</div>
		<!-- Stashed HTML -->
		<div class="stashed-html">
			<div id="stashed-cert-modal" class="modal cert-modal">
				<div class="modal-content">
					<div class="right"><a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat modal-close-button"><i class="material-icons">close</i></a></div>
					<h5>Sertifikat</h5>
					<table class="bordered">
						<!-- Dummy thead to get line at top of table -->
						<thead>
							<tr>
								<th></th>
								<th></th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
					<br>
					<div class="modal-footer">
						<a class="btn-floating btn-small waves-effect waves-light red tooltipped hoverable download-button" data-position="left" data-tooltip="Last ned dette sertifikatet"><i class="material-icons">file_download</i></a>
					</div>
				</div>
			</div>
			<div id="stashed-loader">
				<div class="center">
					<br><br>
					<div class="preloader-wrapper big active">
						<div class="spinner-layer spinner-blue-only">
							<div class="circle-clipper left">
								<div class="circle"></div>
							</div>
							<div class="gap-patch">
								<div class="circle"></div>
							</div>
							<div class="circle-clipper right">
									<div class="circle"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div id="stashed-searchpage">
				<br>
				<div class="card">
					<div class="card-tabs">
						<ul class="tabs tabs-fixed-width">
							<li class="tab"><a class="active" id="enterprise-search" href="#enterprise">Virksomhet</a></li>
							<li class ="tab"><a href="#person" id="person-search">Person</a></li>
						</ul>
					</div>
					<div class="card-content">
						<div id="enterprise">
							<div class="row">
								<div class="input-field col s12">
									<input type="text" id="enterprise-search-value" class="search-box">
									<label for="autocomplete-input"><i class="material-icons" >search</i>Organisasjonsnummer eller -navn</label>
								</div>
							</div>
						</div>
						<div id="person">
							<div class="row">
								<div class="input-field col s12">
									<input type="text" id="person-search-value" class="search-box">
									<label for="autocomplete-input"><i class="material-icons" >search</i>Fullt navn</label>
								</div>
							</div>
						</div>
						<div class="center">
							<button class="btn waves-effect waves-light valign-wrapper" id="search-button">Søk</button>
							<button class="btn waves-effect waves-light valign-wrapper" id="search-test-button">Søk i test</button>
						</div>
					</div>
				</div>
			</div>
			<div id="stashed-underenhet-notification">
				<a href="#">
					<div class="card-panel grey lighten-4 hoverable underenhet">
						<span class="black-text"><i class="material-icons">info</i>Disse sertifikatene er utstedt til en underenhet. Trykk her for å lese mer.</span>
					</div>
				</a>
				<br>
			</div>
			<div id="stashed-ukjent-notification">
				<a href="#">
					<div class="card-panel grey lighten-4 hoverable ukjent">
						<span class="black-text"><i class="material-icons">info</i>Disse sertifikatene er av en ukjent type. Trykk her for å lese mer.</span>
					</div>
				</a>
				<br>
			</div>
			<div id="stashed-revoked-notification">
				<div class="row">
					<div class="col s12">
						<a href="#">
							<div class="revokert card-panel orange hoverable">
								<span class="white-text"><i class="material-icons">warning</i>Disse sertifikatene er revokerte og dermed ikke gyldige</span>
							</div>
						</a>
					</div>
				</div>
			</div>
			<div id="stashed-ldap-string-box">
				<div class="divider"></div>
				<br>
				<div class="right-align">
					<a class="btn-floating btn-small waves-effect waves-light red tooltipped ldap-button hoverable" data-position="left" data-tooltip="Se LDAP-string for dette settet"><i class="material-icons">content_copy</i></a>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha384-xBuQ/xzmlsLoJpyjoggmTEz8OWUFM0/RC5BsqQBDX2v5cMvDHcMakNTNrHIW2I5f" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js" integrity="sha384-C5yXM3HiWa6a8kI2Jd4LuuwmOGAVgJw0YSmuRXN+PLT5Jln26ddUnPQxkInM/w2x" crossorigin="anonymous"></script>
		<script type="text/javascript" src="resources/ie.js"></script>
		<script type="text/javascript" src="resources/sertifikatsok.js"></script>
	</body>
</html>
